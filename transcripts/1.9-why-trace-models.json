{"text":" Why trace there are four problems and four solutions that I'm going to talk about in terms of tracing for models. First up in production we could have nan propagation. What this means is that you start with a small type problem at layers 12, etc. But by the end you have 100% of a nan propagation. The model is effectively dead and if you look at this, a layer trace could catch it at the source. this model before you get all the way to the end you can actually see that there's a problem in a particular layer in the model and that's what you need to catch and then next thing here we see latency spikes. There's could be another one. Let's say that typically it takes 15 milliseconds for most tokens, but all of a sudden there's a token that's got 180 milliseconds to generate what's going on here. We have an over 10 X spike. at is doing a brick or compute type tile tracing and figure out what is causing this outlier Maybe there's some kind of a bug in the code or there's some kind of performance issue that we need to figure out inside of one of the kernels inside the GPU But by doing latency-based spikes looking for outliers we can actually find the root cause Another one is quality drift if we're looking at let's say a golden chip a specific loss that we've stopped at, but then a new version has a much higher loss, maybe it's a thousand times off. What's going on here? Okay, we can do a different trace. So we can look at the layers. We can look at what are the components that are different between this model and another model. And we can see that, oh, this new thing that we did, maybe we made a change to softmax or we added some different data. It completely blew up the model. need to change things. Another one is memory bloat as well. You can potentially have a problem in C++ or maybe in CE or maybe another component of it that's unsafe code and rust and you need to look at where this memory bloat is coming from and in fact, maybe it's even just a sloppy heuristic and needs to be tuned and you can look at this and say, \"Uh oh, we're gonna get an OOM maybe you need to quantize the model because it's not gonna fit on the device you're trying to deploy to, but by looking at the memory, you're able to get it. So when you're looking at models, it introduces a very different style of problem than let's say a database or a web server, but it doesn't mean that the same techniques in the same methodology doesn't apply. For example, the toilet away or five wise, these kinds of and measurement and performance testing, all these play a very important role with production in my lops.","segments":[]}