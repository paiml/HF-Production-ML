<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080">
  <defs>
    <linearGradient id="embedGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#22c55e"/>
      <stop offset="100%" stop-color="#16a34a"/>
    </linearGradient>
    <linearGradient id="externalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="mmapGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f59e0b"/>
      <stop offset="100%" stop-color="#d97706"/>
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="#020617"/>

  <!-- Title -->
  <text x="960" y="50" text-anchor="middle" fill="#f8fafc" font-family="Inter, system-ui, sans-serif" font-size="36" font-weight="700">2.5 Binary Deployment Patterns</text>
  <text x="960" y="85" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="16">Embed vs External vs Memory-Mapped</text>

  <!-- Pattern 1: Embedded Binary -->
  <g transform="translate(340, 380)">
    <rect x="-280" y="-230" width="560" height="460" rx="20" fill="#0f172a" stroke="#22c55e" stroke-width="3"/>
    <rect x="-270" y="-220" width="540" height="440" rx="16" fill="url(#embedGrad)" opacity="0.1"/>

    <text x="0" y="-185" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700">EMBEDDED</text>
    <text x="0" y="-155" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Model bundled in binary</text>

    <!-- Binary visualization -->
    <g transform="translate(0, -60)">
      <rect x="-200" y="-70" width="400" height="140" rx="12" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>

      <!-- Code section -->
      <rect x="-180" y="-50" width="120" height="100" rx="6" fill="#052e16"/>
      <text x="-120" y="-25" text-anchor="middle" fill="#4ade80" font-family="JetBrains Mono, monospace" font-size="11">.text</text>
      <text x="-120" y="0" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">Rust code</text>
      <text x="-120" y="20" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">inference</text>

      <!-- Model section -->
      <rect x="-40" y="-50" width="220" height="100" rx="6" fill="#22c55e" opacity="0.3"/>
      <text x="70" y="-25" text-anchor="middle" fill="#86efac" font-family="JetBrains Mono, monospace" font-size="11">.rodata</text>
      <text x="70" y="0" text-anchor="middle" fill="#4ade80" font-family="JetBrains Mono, monospace" font-size="10">include_bytes!</text>
      <text x="70" y="20" text-anchor="middle" fill="#4ade80" font-family="JetBrains Mono, monospace" font-size="10">model.apr</text>
    </g>

    <!-- Pros/Cons -->
    <g transform="translate(0, 100)">
      <rect x="-220" y="-40" width="200" height="120" rx="8" fill="#052e16"/>
      <text x="-120" y="-15" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Pros</text>
      <text x="-120" y="10" text-anchor="middle" fill="#86efac" font-family="Inter, system-ui, sans-serif" font-size="10">Single file deploy</text>
      <text x="-120" y="28" text-anchor="middle" fill="#86efac" font-family="Inter, system-ui, sans-serif" font-size="10">No file I/O</text>
      <text x="-120" y="46" text-anchor="middle" fill="#86efac" font-family="Inter, system-ui, sans-serif" font-size="10">WASM compatible</text>
      <text x="-120" y="64" text-anchor="middle" fill="#86efac" font-family="Inter, system-ui, sans-serif" font-size="10">Airgapped deploy</text>

      <rect x="20" y="-40" width="200" height="120" rx="8" fill="#450a0a"/>
      <text x="120" y="-15" text-anchor="middle" fill="#f87171" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Cons</text>
      <text x="120" y="10" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Large binary size</text>
      <text x="120" y="28" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Rebuild to update</text>
      <text x="120" y="46" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Memory overhead</text>
    </g>
  </g>

  <!-- Pattern 2: External File -->
  <g transform="translate(960, 380)">
    <rect x="-280" y="-230" width="560" height="460" rx="20" fill="#0f172a" stroke="#3b82f6" stroke-width="3"/>
    <rect x="-270" y="-220" width="540" height="440" rx="16" fill="url(#externalGrad)" opacity="0.1"/>

    <text x="0" y="-185" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700">EXTERNAL</text>
    <text x="0" y="-155" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Runtime file loading</text>

    <!-- Binary + File visualization -->
    <g transform="translate(0, -60)">
      <!-- Binary -->
      <rect x="-200" y="-70" width="160" height="140" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
      <text x="-120" y="-30" text-anchor="middle" fill="#60a5fa" font-family="JetBrains Mono, monospace" font-size="11">binary</text>
      <rect x="-180" y="-10" width="120" height="60" rx="6" fill="#1e3a5f"/>
      <text x="-120" y="15" text-anchor="middle" fill="#93c5fd" font-family="JetBrains Mono, monospace" font-size="9">.text</text>
      <text x="-120" y="35" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">small</text>

      <!-- Arrow -->
      <line x1="-35" y1="0" x2="35" y2="0" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="0" y="-15" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="9">load()</text>

      <!-- Model file -->
      <rect x="40" y="-70" width="160" height="140" rx="12" fill="#1e293b" stroke="#60a5fa" stroke-width="2"/>
      <text x="120" y="-30" text-anchor="middle" fill="#60a5fa" font-family="JetBrains Mono, monospace" font-size="11">model.apr</text>
      <rect x="60" y="-10" width="120" height="60" rx="6" fill="#3b82f6" opacity="0.3"/>
      <text x="120" y="15" text-anchor="middle" fill="#93c5fd" font-family="JetBrains Mono, monospace" font-size="9">weights</text>
      <text x="120" y="35" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">large</text>
    </g>

    <!-- Pros/Cons -->
    <g transform="translate(0, 100)">
      <rect x="-220" y="-40" width="200" height="120" rx="8" fill="#1e3a5f"/>
      <text x="-120" y="-15" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Pros</text>
      <text x="-120" y="10" text-anchor="middle" fill="#93c5fd" font-family="Inter, system-ui, sans-serif" font-size="10">Small binary</text>
      <text x="-120" y="28" text-anchor="middle" fill="#93c5fd" font-family="Inter, system-ui, sans-serif" font-size="10">Hot-swap models</text>
      <text x="-120" y="46" text-anchor="middle" fill="#93c5fd" font-family="Inter, system-ui, sans-serif" font-size="10">Shared models</text>
      <text x="-120" y="64" text-anchor="middle" fill="#93c5fd" font-family="Inter, system-ui, sans-serif" font-size="10">Faster builds</text>

      <rect x="20" y="-40" width="200" height="120" rx="8" fill="#450a0a"/>
      <text x="120" y="-15" text-anchor="middle" fill="#f87171" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Cons</text>
      <text x="120" y="10" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">File path dependency</text>
      <text x="120" y="28" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">I/O latency</text>
      <text x="120" y="46" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Distribution complexity</text>
    </g>
  </g>

  <!-- Pattern 3: Memory Mapped -->
  <g transform="translate(1580, 380)">
    <rect x="-280" y="-230" width="560" height="460" rx="20" fill="#0f172a" stroke="#f59e0b" stroke-width="3"/>
    <rect x="-270" y="-220" width="540" height="440" rx="16" fill="url(#mmapGrad)" opacity="0.1"/>

    <text x="0" y="-185" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700">MMAP</text>
    <text x="0" y="-155" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Zero-copy memory mapping</text>

    <!-- Mmap visualization -->
    <g transform="translate(0, -60)">
      <!-- Virtual memory -->
      <rect x="-200" y="-70" width="160" height="140" rx="12" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
      <text x="-120" y="-40" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="10">Virtual Memory</text>
      <rect x="-180" y="-20" width="120" height="80" rx="6" fill="#451a03"/>
      <text x="-120" y="5" text-anchor="middle" fill="#fcd34d" font-family="JetBrains Mono, monospace" font-size="9">mmap ptr</text>
      <text x="-120" y="25" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">page aligned</text>
      <text x="-120" y="45" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">64-byte</text>

      <!-- Bidirectional arrow -->
      <line x1="-35" y1="0" x2="35" y2="0" stroke="#f59e0b" stroke-width="2"/>
      <polygon points="35,0 25,-5 25,5" fill="#f59e0b"/>
      <polygon points="-35,0 -25,-5 -25,5" fill="#f59e0b"/>
      <text x="0" y="-15" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="8">page fault</text>

      <!-- Disk file -->
      <rect x="40" y="-70" width="160" height="140" rx="12" fill="#1e293b" stroke="#fbbf24" stroke-width="2"/>
      <text x="120" y="-40" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="10">Disk File</text>
      <rect x="60" y="-20" width="120" height="80" rx="6" fill="#f59e0b" opacity="0.2"/>
      <text x="120" y="5" text-anchor="middle" fill="#fcd34d" font-family="JetBrains Mono, monospace" font-size="9">model.apr</text>
      <text x="120" y="25" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">OS managed</text>
      <text x="120" y="45" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">lazy load</text>
    </g>

    <!-- Pros/Cons -->
    <g transform="translate(0, 100)">
      <rect x="-220" y="-40" width="200" height="120" rx="8" fill="#451a03"/>
      <text x="-120" y="-15" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Pros</text>
      <text x="-120" y="10" text-anchor="middle" fill="#fcd34d" font-family="Inter, system-ui, sans-serif" font-size="10">Instant load time</text>
      <text x="-120" y="28" text-anchor="middle" fill="#fcd34d" font-family="Inter, system-ui, sans-serif" font-size="10">Shared memory</text>
      <text x="-120" y="46" text-anchor="middle" fill="#fcd34d" font-family="Inter, system-ui, sans-serif" font-size="10">OS page cache</text>
      <text x="-120" y="64" text-anchor="middle" fill="#fcd34d" font-family="Inter, system-ui, sans-serif" font-size="10">Zero copy</text>

      <rect x="20" y="-40" width="200" height="120" rx="8" fill="#450a0a"/>
      <text x="120" y="-15" text-anchor="middle" fill="#f87171" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Cons</text>
      <text x="120" y="10" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Alignment required</text>
      <text x="120" y="28" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">No WASM support</text>
      <text x="120" y="46" text-anchor="middle" fill="#fca5a5" font-family="Inter, system-ui, sans-serif" font-size="10">Platform specific</text>
    </g>
  </g>

  <!-- Decision Matrix (Bottom) -->
  <g transform="translate(960, 920)">
    <rect x="-800" y="-80" width="1600" height="120" rx="12" fill="#0f172a" stroke="#334155" stroke-width="2"/>
    <text x="-700" y="-40" fill="#e2e8f0" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600">Use When:</text>

    <g transform="translate(-450, 0)">
      <rect x="-120" y="-40" width="240" height="60" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="1"/>
      <text x="0" y="-15" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Embedded</text>
      <text x="0" y="10" text-anchor="middle" fill="#86efac" font-family="Inter, system-ui, sans-serif" font-size="10">WASM, airgapped, &lt;50MB</text>
    </g>

    <g transform="translate(0, 0)">
      <rect x="-120" y="-40" width="240" height="60" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
      <text x="0" y="-15" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">External</text>
      <text x="0" y="10" text-anchor="middle" fill="#93c5fd" font-family="Inter, system-ui, sans-serif" font-size="10">Hot-swap, multi-model, dev</text>
    </g>

    <g transform="translate(450, 0)">
      <rect x="-120" y="-40" width="240" height="60" rx="6" fill="#451a03" stroke="#f59e0b" stroke-width="1"/>
      <text x="0" y="-15" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600">Mmap</text>
      <text x="0" y="10" text-anchor="middle" fill="#fcd34d" font-family="Inter, system-ui, sans-serif" font-size="10">Production, large models, servers</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="960" y="1060" text-anchor="middle" fill="#475569" font-family="Inter, system-ui, sans-serif" font-size="14">Binary Deployment: Choose pattern based on size, update frequency, and target platform</text>
</svg>
