<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080">
  <defs>
    <linearGradient id="logsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="metricsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#22c55e"/>
      <stop offset="100%" stop-color="#16a34a"/>
    </linearGradient>
    <linearGradient id="tracesGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f59e0b"/>
      <stop offset="100%" stop-color="#d97706"/>
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="#020617"/>

  <!-- Title -->
  <text x="960" y="50" text-anchor="middle" fill="#f8fafc" font-family="Inter, system-ui, sans-serif" font-size="36" font-weight="700">2.3 Model Observability Stack</text>
  <text x="960" y="85" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="16">Three Pillars: Logs, Metrics, Traces</text>

  <!-- Three Pillars -->
  <!-- Pillar 1: Logs -->
  <g transform="translate(320, 350)">
    <rect x="-250" y="-200" width="500" height="400" rx="20" fill="#0f172a" stroke="#3b82f6" stroke-width="3"/>
    <rect x="-240" y="-190" width="480" height="380" rx="16" fill="url(#logsGrad)" opacity="0.1"/>

    <text x="0" y="-150" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="700">LOGS</text>
    <text x="0" y="-120" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Event Records</text>

    <!-- Log entries visualization -->
    <g transform="translate(0, -50)">
      <rect x="-210" y="-30" width="420" height="28" rx="4" fill="#1e293b"/>
      <text x="-200" y="-10" fill="#22c55e" font-family="JetBrains Mono, monospace" font-size="10">[INFO]</text>
      <text x="-140" y="-10" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="10">Model loaded: qwen-1.5b</text>

      <rect x="-210" y="5" width="420" height="28" rx="4" fill="#1e293b"/>
      <text x="-200" y="25" fill="#3b82f6" font-family="JetBrains Mono, monospace" font-size="10">[DEBUG]</text>
      <text x="-130" y="25" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="10">Layer 12 output: 4096 dims</text>

      <rect x="-210" y="40" width="420" height="28" rx="4" fill="#1e293b"/>
      <text x="-200" y="60" fill="#f59e0b" font-family="JetBrains Mono, monospace" font-size="10">[WARN]</text>
      <text x="-140" y="60" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="10">Attention spike: 180ms</text>

      <rect x="-210" y="75" width="420" height="28" rx="4" fill="#1e293b"/>
      <text x="-200" y="95" fill="#ef4444" font-family="JetBrains Mono, monospace" font-size="10">[ERROR]</text>
      <text x="-135" y="95" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="10">NaN detected layer 24</text>
    </g>

    <!-- Log types -->
    <g transform="translate(0, 140)">
      <rect x="-100" y="-20" width="70" height="30" rx="4" fill="#1e3a5f"/>
      <text x="-65" y="2" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="10">Inference</text>
      <rect x="-20" y="-20" width="70" height="30" rx="4" fill="#1e3a5f"/>
      <text x="15" y="2" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="10">Loading</text>
      <rect x="60" y="-20" width="70" height="30" rx="4" fill="#1e3a5f"/>
      <text x="95" y="2" text-anchor="middle" fill="#60a5fa" font-family="Inter, system-ui, sans-serif" font-size="10">Errors</text>
    </g>
  </g>

  <!-- Pillar 2: Metrics -->
  <g transform="translate(960, 350)">
    <rect x="-250" y="-200" width="500" height="400" rx="20" fill="#0f172a" stroke="#22c55e" stroke-width="3"/>
    <rect x="-240" y="-190" width="480" height="380" rx="16" fill="url(#metricsGrad)" opacity="0.1"/>

    <text x="0" y="-150" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="700">METRICS</text>
    <text x="0" y="-120" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Numeric Measurements</text>

    <!-- Metrics visualization - simple bar chart -->
    <g transform="translate(0, -20)">
      <!-- Chart background -->
      <rect x="-200" y="-60" width="400" height="150" rx="8" fill="#1e293b"/>

      <!-- Y axis labels -->
      <text x="-185" y="-40" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">tok/s</text>
      <text x="-185" y="0" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">300</text>
      <text x="-185" y="40" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">200</text>
      <text x="-185" y="75" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="9">100</text>

      <!-- Bars -->
      <rect x="-140" y="10" width="50" height="70" rx="4" fill="#22c55e" opacity="0.8"/>
      <rect x="-70" y="-20" width="50" height="100" rx="4" fill="#22c55e" opacity="0.8"/>
      <rect x="0" y="-10" width="50" height="90" rx="4" fill="#22c55e" opacity="0.8"/>
      <rect x="70" y="20" width="50" height="60" rx="4" fill="#f59e0b" opacity="0.8"/>
      <rect x="140" y="-30" width="50" height="110" rx="4" fill="#22c55e" opacity="0.8"/>

      <!-- X axis labels -->
      <text x="-115" y="100" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">12:00</text>
      <text x="-45" y="100" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">12:15</text>
      <text x="25" y="100" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">12:30</text>
      <text x="95" y="100" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">12:45</text>
      <text x="165" y="100" text-anchor="middle" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">13:00</text>
    </g>

    <!-- Metric types -->
    <g transform="translate(0, 140)">
      <rect x="-150" y="-20" width="90" height="30" rx="4" fill="#052e16"/>
      <text x="-105" y="2" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="10">Throughput</text>
      <rect x="-50" y="-20" width="90" height="30" rx="4" fill="#052e16"/>
      <text x="-5" y="2" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="10">Latency</text>
      <rect x="50" y="-20" width="90" height="30" rx="4" fill="#052e16"/>
      <text x="95" y="2" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="10">Memory</text>
    </g>
  </g>

  <!-- Pillar 3: Traces -->
  <g transform="translate(1600, 350)">
    <rect x="-250" y="-200" width="500" height="400" rx="20" fill="#0f172a" stroke="#f59e0b" stroke-width="3"/>
    <rect x="-240" y="-190" width="480" height="380" rx="16" fill="url(#tracesGrad)" opacity="0.1"/>

    <text x="0" y="-150" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="700">TRACES</text>
    <text x="0" y="-120" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="14">Request Lifecycle</text>

    <!-- Trace visualization - waterfall -->
    <g transform="translate(0, -20)">
      <rect x="-200" y="-60" width="400" height="150" rx="8" fill="#1e293b"/>

      <!-- Spans -->
      <text x="-185" y="-35" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="9">inference</text>
      <rect x="-90" y="-45" width="280" height="18" rx="3" fill="#f59e0b" opacity="0.8"/>

      <text x="-185" y="-10" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="9">tokenize</text>
      <rect x="-90" y="-20" width="40" height="18" rx="3" fill="#3b82f6" opacity="0.8"/>

      <text x="-185" y="15" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="9">encoder</text>
      <rect x="-45" y="5" width="100" height="18" rx="3" fill="#8b5cf6" opacity="0.8"/>

      <text x="-185" y="40" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="9">decoder</text>
      <rect x="60" y="30" width="120" height="18" rx="3" fill="#ec4899" opacity="0.8"/>

      <text x="-185" y="65" fill="#94a3b8" font-family="JetBrains Mono, monospace" font-size="9">detokenize</text>
      <rect x="185" y="55" width="5" height="18" rx="1" fill="#22c55e" opacity="0.8"/>

      <!-- Time axis -->
      <line x1="-90" y1="85" x2="190" y2="85" stroke="#64748b" stroke-width="1"/>
      <text x="-90" y="100" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">0ms</text>
      <text x="50" y="100" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">50ms</text>
      <text x="190" y="100" fill="#64748b" font-family="JetBrains Mono, monospace" font-size="8">100ms</text>
    </g>

    <!-- Trace types -->
    <g transform="translate(0, 140)">
      <rect x="-150" y="-20" width="90" height="30" rx="4" fill="#451a03"/>
      <text x="-105" y="2" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="10">Spans</text>
      <rect x="-50" y="-20" width="90" height="30" rx="4" fill="#451a03"/>
      <text x="-5" y="2" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="10">Context</text>
      <rect x="50" y="-20" width="90" height="30" rx="4" fill="#451a03"/>
      <text x="95" y="2" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="10">Layers</text>
    </g>
  </g>

  <!-- Bottom: Alerting Flow -->
  <g transform="translate(960, 820)">
    <rect x="-800" y="-120" width="1600" height="200" rx="16" fill="#0f172a" stroke="#334155" stroke-width="2"/>
    <text x="0" y="-85" text-anchor="middle" fill="#e2e8f0" font-family="Inter, system-ui, sans-serif" font-size="18" font-weight="600">Anomaly Detection Pipeline</text>

    <!-- Detection boxes -->
    <g transform="translate(-550, 0)">
      <rect x="-100" y="-50" width="200" height="100" rx="12" fill="#1e293b" stroke="#ef4444" stroke-width="2"/>
      <text x="0" y="-20" text-anchor="middle" fill="#f87171" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600">NaN Detection</text>
      <text x="0" y="5" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">Layer activations</text>
      <text x="0" y="25" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">exploding gradients</text>
    </g>

    <line x1="-345" y1="0" x2="-255" y2="0" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(-150, 0)">
      <rect x="-100" y="-50" width="200" height="100" rx="12" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
      <text x="0" y="-20" text-anchor="middle" fill="#fbbf24" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600">Latency Spike</text>
      <text x="0" y="5" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">P99 threshold</text>
      <text x="0" y="25" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">&gt;10x baseline</text>
    </g>

    <line x1="55" y1="0" x2="145" y2="0" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(250, 0)">
      <rect x="-100" y="-50" width="200" height="100" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
      <text x="0" y="-20" text-anchor="middle" fill="#a78bfa" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600">Quality Drift</text>
      <text x="0" y="5" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">Golden dataset</text>
      <text x="0" y="25" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">accuracy delta</text>
    </g>

    <line x1="455" y1="0" x2="545" y2="0" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(650, 0)">
      <rect x="-100" y="-50" width="200" height="100" rx="12" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
      <text x="0" y="-20" text-anchor="middle" fill="#4ade80" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600">Alert</text>
      <text x="0" y="5" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">PagerDuty</text>
      <text x="0" y="25" text-anchor="middle" fill="#64748b" font-family="Inter, system-ui, sans-serif" font-size="11">Slack webhook</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="960" y="1060" text-anchor="middle" fill="#475569" font-family="Inter, system-ui, sans-serif" font-size="14">Observability: Logs + Metrics + Traces = Full Visibility</text>
</svg>
